{{ if .Section }}
<nav class="post-nav">
  <span class="nav-prev" title="You can use the corresponding keys on the keyboard">{{ with .PrevInSection }}&larr; <a href="{{ .RelPermalink }}">{{ .Title }}</a>{{ end }}</span>
  <span class="nav-next" title="You can use the corresponding keys on the keyboard">{{ with .NextInSection }}<a href="{{ .RelPermalink }}">{{ .Title }}</a>&rarr; {{ end }}</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  // Left arrow
    {{ if .PrevInSection }}
    url = '{{ .PrevInSection.RelPermalink }}';
    {{ end }}
  } else if (e.which == 39) {  // Right arrow
    {{ if .NextInSection }}
    url = '{{ .NextInSection.RelPermalink }}';
    {{ end }}
  }
  if (url) window.location = url;
});
</script>
{{ end }}
<!-- 不加载wildfire评论 -->
<!-- {{ partial "wildfire.html" . }} -->
<!-- 加载utterances评论 -->
<div id="utterances"></div>
{{ partial "utterances.html" . }}
<script>
  var article = document.getElementsByTagName("article")[0];
  var emojiReg = /[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/g; 
  for(var i = 0; i < article.children.length; i++) {
    var str = article.children[i].innerHTML;
    article.children[i].innerHTML =  str.replace(emojiReg, function(emoji){
      return "<span class=\"darkmode-ignore\">" + emoji + "</span>";
    });
    if (article.children[i].nodeName === "HR") {
      break;
    }
  }
</script>

{{ range .Site.Params.customJS }}
<script async src="{{ . | relURL }}"></script>
{{ end }}

{{ partial "darkmode.html" . }}

{{ if eq .URL "/" }}
{{ partial "darkmode.html" . }}
{{ end }}

{{ if and (not .Params.disable_mathjax) (or (in (string .Content) "\\") (in (string .Content) "$")) }}
<!-- <script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script> -->
{{ end }}
